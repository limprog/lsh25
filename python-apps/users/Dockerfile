# Базовый образ: выбираем официальный образ Python.
# 'slim-buster' - это облегченная версия, что хорошо для продакшена.
FROM python:3.9-slim-buster

# Устанавливаем рабочую директорию внутри контейнера.
# Все последующие команды (COPY, RUN) будут выполняться относительно этой директории.
WORKDIR /app

# Копируем файл зависимостей и устанавливаем их.
# Сначала копируем только library.txt, чтобы Docker мог кэшировать этот слой.
COPY library.txt .
RUN pip install --no-cache-dir -r library.txt

# Копируем остальной код вашего приложения.
# Точка '.' означает "скопировать все из текущей папки хоста (./python_server_1)
# в текущую рабочую директорию контейнера (/app)".
COPY . .

# Указываем, какой порт приложение слушает внутри контейнера.
# Это просто метаданные, не открывает порт наружу VPS.
EXPOSE 8000

# Команда, которая будет выполняться при запуске контейнера.
# Предполагается, что ваш основной скрипт называется app.py и запускает сервер.
CMD ["python", "main.py"]